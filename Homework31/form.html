<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <form class='formWithValidation'>
        <div>
          <div>
            <label>From:</label>
          </div>
          <div>
            <input type='text' class='from field' />
          </div>
        </div>
        <div>
          <div>
            <label>Password:</label>
          </div>
          <div>
            <input type='password' class='password field' />
          </div>
        </div>
        <div>
          <div>
            <label>Password confirmation:</label>
          </div>
          <div>
            <input type='password' class='passwordConfirmation field' />
          </div>
        </div>
        <div>
          <div>
            <label>Where</label>
          </div>
          <div>
            <select class='where field'>
              <option></option>
              <option value='developers'>Developers</option>
              <option value='managers'>Managers</option>
              <option value='devops'>DevOps</option>
            </select>
          </div>
        </div>
        <div>
          <div>
            <label>Message:</label>
          </div>
          <div>
            <textarea class='message field'></textarea>
          </div>
        </div>
        <input type='submit' class='validateBtn' value='Validate'/>
      </form>
</body>
    <script>
        var form = document.querySelector('.formWithValidation')
let validateBtn = form.querySelector('.validateBtn')
let from = form.querySelector('.from')
let password = form.querySelector('.password')
let passwordConfirmation = form.querySelector('.passwordConfirmation')
let where = form.querySelector('.where')
let message = form.querySelector('.message')

form.addEventListener('submit', function (event) {
  event.preventDefault()
  console.log('clicked on validate')
  console.log('from: ', from.value)
  console.log('password: ', password.value)
  console.log('passwordConfirmation: ', passwordConfirmation.value)
  console.log('where: ', where.value)
  console.log('message: ', message.value)
})

let fields = form.querySelectorAll('.field')



form.addEventListener('submit', function (event) {
  event.preventDefault()

  removeValidation()

  checkFieldsPresence()

  checkPasswordMatch()
})

var generateError = function (text) {
  var error = document.createElement('div')
  error.className = 'error'
  error.style.color = 'red'
  error.innerHTML = text
  return error
}

var removeValidation = function () {
  var errors = form.querySelectorAll('.error')

  for (var i = 0; i < errors.length; i++) {
    errors[i].remove()
  }
}

var checkFieldsPresence = function () {
  for (var i = 0; i < fields.length; i++) {
    if (!fields[i].value) {
      console.log('field is blank', fields[i])
      var error = generateError('Cant be blank')
      form[i].parentElement.insertBefore(error, fields[i])
    }
  }
}

var checkPasswordMatch = function () {
  if (password.value !== passwordConfirmation.value) {
    console.log('not equals')
    var error = generateError('Password doesnt match')
    console.log(error)
    password.parentElement.insertBefore(error, password)
  }
}
    </script>
</html>